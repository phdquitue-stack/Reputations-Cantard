<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Réputations des Factions</title>
  <style>
    :root{
      --bg:#0b1220;
      --card:#111a2e;
      --text:#e8eefc;
      --muted:#9fb0d0;
      --track:#223256;
      --tick:#38507f;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: radial-gradient(1200px 600px at 20% 0%, #14224a 0%, var(--bg) 60%);
      color:var(--text);
      padding:32px;
    }
    h1{margin:0 0 20px;font-size:24px}

    .grid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap:16px;
    }
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.08);
      border-radius:18px;
      padding:16px;
      box-shadow: var(--shadow);
    }
    .row{display:flex;flex-direction:column;gap:10px}

    .legend .title{font-weight:800;font-size:14px}
    .legend .subtitle{color:var(--muted);font-size:12px;margin-top:4px}

    .gauge{
      position:relative;
      width:100%;
      height:64px;
      padding-top:16px;
    }

    .track{
      position:absolute;
      left:0; right:0;
      top:28px;
      height:12px;
      background:var(--track);
      border-radius:999px;
      overflow:hidden;
    }
    .fill{
      height:100%;
      width:0%;
      border-radius:999px;
      position:relative;
    }

    .c-red{ background-color:#ff4d6d; }
    .c-orange{ background-color:#ffb020; }
    .c-green{ background-color:#28d17c; }

    .bubble{
      position:absolute;
      top:0px;
      transform: translateX(-50%);
      padding:6px 10px;
      border-radius:999px;
      font-size:12px;
      font-weight:800;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.14);
      white-space:nowrap;
    }

    .ticks{
      position:absolute;
      left:0; right:0;
      top:10px;
      height:18px;
      pointer-events:none;
    }
    .tick{
      position:absolute;
      top:0;
      width:2px;
      height:10px;
      background: var(--tick);
      transform: translateX(-50%);
    }
    .tick.major{
      height:14px;
    }
    .tick-label{
      position:absolute;
      top:12px;
      transform: translateX(-50%);
      font-size:10px;
      color:var(--muted);
    }
  </style>
</head>
<body>

<h1>Réputation des Factions</h1>

<div class="grid">

  <!-- A -->
  <div class="card">
    <div class="row">
      <div class="gauge" data-key="a" data-title="Adamantine du Ponant"></div>
      <div class="legend">
        <div class="title">Adamantine du Ponant</div>
      </div>
    </div>
  </div>

  <!-- B -->
  <div class="card">
    <div class="row">
      <div class="gauge" data-key="b" data-title="Alignement"></div>
      <div class="legend">
        <div class="title">Alignement</div>
        <div class="subtitle">50 = neutre | &lt;50 = mauvais | &gt;50 = bon</div>
      </div>
    </div>
  </div>

  <!-- C -->
  <div class="card">
    <div class="row">
      <div class="gauge" data-key="c" data-title="Karenta"></div>
      <div class="legend">
        <div class="title">Karenta</div>
      </div>
    </div>
  </div>

  <!-- D -->
  <div class="card">
    <div class="row">
      <div class="gauge" data-key="d" data-title="Venageta"></div>
      <div class="legend">
        <div class="title">Venageta</div>
      </div>
    </div>
  </div>

  <!-- E -->
  <div class="card">
    <div class="row">
      <div class="gauge" data-key="e" data-title="La Lance de Pyrite"></div>
      <div class="legend">
        <div class="title">La Lance de Pyrite</div>
      </div>
    </div>
  </div>

  <!-- F -->
  <div class="card">
    <div class="row">
      <div class="gauge" data-key="f" data-title="Halle des aventuriers"></div>
      <div class="legend">
        <div class="title">Halle des aventuriers</div>
      </div>
    </div>
  </div>

</div>

<script>
  const clamp = (n, min, max) => Math.max(min, Math.min(max, n));

  function colorClassForValue(v){
    if (v < 40) return "c-red";
    if (v < 70) return "c-orange";
    return "c-green";
  }

  function buildTicks(container){
    const ticks = document.createElement("div");
    ticks.className = "ticks";

    for(let i=0;i<=20;i++){
      const value = i*5;
      const left = value;

      const t = document.createElement("div");
      t.className = "tick" + (value % 25 === 0 ? " major" : "");
      t.style.left = left + "%";
      ticks.appendChild(t);

      if (value === 0 || value === 50 || value === 100){
        const lab = document.createElement("div");
        lab.className = "tick-label";
        lab.style.left = left + "%";
        lab.textContent = value;
        ticks.appendChild(lab);
      }
    }
    container.appendChild(ticks);
  }

  function renderGauge(gaugeEl, value){
    value = clamp(Math.round(value), 0, 100);
    gaugeEl.innerHTML = "";
    buildTicks(gaugeEl);

    const track = document.createElement("div");
    track.className = "track";

    const fill = document.createElement("div");
    fill.className = "fill " + colorClassForValue(value);
    fill.style.width = value + "%";

    const bubble = document.createElement("div");
    bubble.className = "bubble";
    bubble.style.left = value + "%";
    bubble.textContent = value + " / 100";

    track.appendChild(fill);
    gaugeEl.appendChild(bubble);
    gaugeEl.appendChild(track);
  }

  const defaults = { 
    a: 20, 
    b: 49, 
    c: 00, 
    d: 00, 
    e: 10, 
    f: 10 
  };

  document.querySelectorAll(".gauge").forEach(g => {
    const key = g.dataset.key;
    renderGauge(g, defaults[key] ?? 0);
  });
</script>

</body>
</html>
