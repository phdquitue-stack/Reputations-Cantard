<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Réputations des Factions</title>
  <style>
    :root{
      /* Fantasy palette */
      --bg0:#070a10;
      --bg1:#0b1220;
      --ink:#f3eddc;
      --text:#efe7d2;
      --muted:#c8bb97;

      --cardA:#0f1218;
      --cardB:#0b0e14;

      --gold:#d6b46a;

      --track:#1a2236;
      --tick:#5d6b86;
      --shadow: 0 18px 40px rgba(0,0,0,.55);

      --r: 22px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--text);
      padding:32px;

      background:
        radial-gradient(900px 500px at 15% 0%, rgba(214,180,106,.12) 0%, rgba(11,18,32,0) 60%),
        radial-gradient(700px 420px at 85% 20%, rgba(110,231,255,.08) 0%, rgba(11,18,32,0) 55%),
        radial-gradient(900px 700px at 50% 120%, rgba(152,92,255,.10) 0%, rgba(11,18,32,0) 60%),
        linear-gradient(180deg, var(--bg1), var(--bg0));
      min-height:100vh;
    }

    h1{
      margin:0 0 18px;
      font-size:28px;
      letter-spacing:.6px;
      font-weight:900;
      text-transform: uppercase;
      color: var(--ink);
      text-shadow: 0 2px 0 rgba(0,0,0,.6);
      position:relative;
      display:inline-block;
      padding-bottom:10px;
    }
    h1:after{
      content:"";
      position:absolute;
      left:0; right:0; bottom:0;
      height:2px;
      background: linear-gradient(90deg, transparent, rgba(214,180,106,.9), transparent);
      filter: drop-shadow(0 6px 10px rgba(214,180,106,.25));
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap:16px;
    }

    .card{
      position:relative;
      border-radius: var(--r);
      padding:16px;
      box-shadow: var(--shadow);
      overflow:hidden;

      background:
        radial-gradient(120% 140% at 10% 0%, rgba(214,180,106,.14) 0%, rgba(15,18,24,0) 55%),
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)),
        linear-gradient(180deg, var(--cardA), var(--cardB));
      border: 1px solid rgba(214,180,106,.22);
    }
    .card:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        repeating-linear-gradient(
          135deg,
          rgba(214,180,106,.05) 0px,
          rgba(214,180,106,.05) 6px,
          rgba(255,255,255,0) 6px,
          rgba(255,255,255,0) 18px
        );
      opacity:.28;
      pointer-events:none;
      mix-blend-mode: overlay;
    }
    .card:after{
      content:"";
      position:absolute;
      inset:10px;
      border-radius: calc(var(--r) - 10px);
      border: 1px solid rgba(255,255,255,.06);
      pointer-events:none;
    }

    .row{display:flex;flex-direction:column;gap:10px}

    .legend .title{
      font-weight:900;
      font-size:14px;
      letter-spacing:.3px;
      color: var(--ink);
    }
    .legend .subtitle{
      color: var(--muted);
      font-size:12px;
      margin-top:4px;
      display:flex;
      align-items:center;
      gap:8px;
      flex-wrap:wrap;
    }

    /* small badge for status */
    .badge{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:3px 8px;
      border-radius:999px;
      font-weight:900;
      font-size:11px;
      letter-spacing:.25px;
      color: var(--ink);
      border:1px solid rgba(214,180,106,.28);
      background: rgba(14,18,30,.55);
      backdrop-filter: blur(6px);
      box-shadow: 0 10px 22px rgba(0,0,0,.25);
    }
    .dot{
      width:8px;height:8px;border-radius:50%;
      background: rgba(214,180,106,.8);
      box-shadow: 0 0 14px rgba(214,180,106,.35);
    }

    .gauge{
      position:relative;
      width:100%;
      height:78px;
      padding-top:18px;
    }

    .ticks{
      position:absolute;
      left:0; right:0;
      top:10px;
      height:20px;
      pointer-events:none;
    }
    .tick{
      position:absolute;
      top:0;
      width:2px;
      height:10px;
      background: rgba(93,107,134,.9);
      transform: translateX(-50%);
      border-radius:2px;
      filter: drop-shadow(0 2px 2px rgba(0,0,0,.35));
    }
    .tick.major{
      height:15px;
      background: rgba(214,180,106,.7);
    }
    .tick-label{
      position:absolute;
      top:14px;
      transform: translateX(-50%);
      font-size:10px;
      color: rgba(200,187,151,.95);
      text-shadow: 0 1px 0 rgba(0,0,0,.6);
    }

    .track{
      position:absolute;
      left:0; right:0;
      top:38px;
      height:14px;
      border-radius:999px;
      overflow:hidden;
      background:
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0)),
        radial-gradient(60% 160% at 50% 0%, rgba(214,180,106,.10) 0%, rgba(0,0,0,0) 60%),
        linear-gradient(180deg, rgba(26,34,54,.95), rgba(14,18,30,.95));
      border: 1px solid rgba(214,180,106,.18);
      box-shadow:
        inset 0 2px 6px rgba(0,0,0,.65),
        0 8px 18px rgba(0,0,0,.35);
    }

    .zero{
      position:absolute;
      left:50%;
      top:36px;
      width:2px;
      height:18px;
      transform: translateX(-50%);
      background: rgba(241,215,154,.85);
      box-shadow: 0 0 18px rgba(214,180,106,.35);
      border-radius:2px;
      pointer-events:none;
    }

    .fill-left, .fill-right{
      position:absolute;
      top:0;
      height:100%;
      width:0%;
      border-radius:999px;
      transition: width 900ms cubic-bezier(.2,.9,.2,1);
      box-shadow:
        inset 0 0 0 1px rgba(255,255,255,.12),
        0 6px 18px rgba(0,0,0,.25);
      overflow:hidden;
    }
    .fill-left{
      right:50%;
      border-top-right-radius:0;
      border-bottom-right-radius:0;
    }
    .fill-right{
      left:50%;
      border-top-left-radius:0;
      border-bottom-left-radius:0;
    }

    .fill-left::before, .fill-right::before{
      content:"";
      position:absolute;
      inset:0;
      background:
        radial-gradient(120px 40px at 25% 50%, rgba(255,255,255,.28), rgba(255,255,255,0) 70%),
        linear-gradient(90deg, rgba(255,255,255,.18), rgba(255,255,255,0) 55%);
      opacity:.8;
      mix-blend-mode: screen;
    }

    /* Value bubble */
    .bubble{
      position:absolute;
      top:0px;
      transform: translateX(-50%);
      padding:7px 11px;
      border-radius:999px;
      font-size:12px;
      font-weight:950;
      letter-spacing:.2px;
      color: var(--ink);
      background:
        radial-gradient(80% 120% at 30% 20%, rgba(241,215,154,.35) 0%, rgba(214,180,106,.08) 45%, rgba(0,0,0,0) 70%),
        linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,0)),
        rgba(14,18,30,.78);
      border:1px solid rgba(214,180,106,.35);
      box-shadow: 0 10px 22px rgba(0,0,0,.4);
      white-space:nowrap;
      backdrop-filter: blur(6px);
    }
    .bubble::after{
      content:"";
      position:absolute;
      left:50%;
      bottom:-6px;
      width:10px;
      height:10px;
      transform: translateX(-50%) rotate(45deg);
      background: rgba(14,18,30,.78);
      border-right:1px solid rgba(214,180,106,.35);
      border-bottom:1px solid rgba(214,180,106,.35);
    }

    @media (max-width:420px){
      body{padding:18px}
    }
  </style>
</head>
<body>

<h1>Réputation des Factions</h1>

<div class="grid">

  <div class="card"><div class="row">
    <div class="gauge" data-key="a" data-title="Adamantine du Ponant"></div>
    <div class="legend">
      <div class="title">Adamantine du Ponant</div>
      <div class="subtitle"><span class="badge"><span class="dot"></span><span class="status-text">—</span></span></div>
    </div>
  </div></div>

  <div class="card"><div class="row">
    <div class="gauge" data-key="b" data-title="Alignement"></div>
    <div class="legend">
      <div class="title">Alignement</div>
      <div class="subtitle">
        0 = neutre | &lt;0 = mauvais | &gt;0 = bon
        <span class="badge"><span class="dot"></span><span class="status-text">—</span></span>
      </div>
    </div>
  </div></div>

  <div class="card"><div class="row">
    <div class="gauge" data-key="c" data-title="Karenta"></div>
    <div class="legend">
      <div class="title">Karenta</div>
      <div class="subtitle"><span class="badge"><span class="dot"></span><span class="status-text">—</span></span></div>
    </div>
  </div></div>

  <div class="card"><div class="row">
    <div class="gauge" data-key="d" data-title="Venageta"></div>
    <div class="legend">
      <div class="title">Venageta</div>
      <div class="subtitle"><span class="badge"><span class="dot"></span><span class="status-text">—</span></span></div>
    </div>
  </div></div>

  <div class="card"><div class="row">
    <div class="gauge" data-key="e" data-title="La Lance de Pyrite"></div>
    <div class="legend">
      <div class="title">La Lance de Pyrite</div>
      <div class="subtitle"><span class="badge"><span class="dot"></span><span class="status-text">—</span></span></div>
    </div>
  </div></div>

  <div class="card"><div class="row">
    <div class="gauge" data-key="f" data-title="Halle des aventuriers"></div>
    <div class="legend">
      <div class="title">Halle des aventuriers</div>
      <div class="subtitle"><span class="badge"><span class="dot"></span><span class="status-text">—</span></span></div>
    </div>
  </div></div>

  <div class="card"><div class="row">
    <div class="gauge" data-key="g" data-title="Le ver Blanc"></div>
    <div class="legend">
      <div class="title">Le ver Blanc</div>
      <div class="subtitle"><span class="badge"><span class="dot"></span><span class="status-text">—</span></span></div>
    </div>
  </div></div>

  <div class="card"><div class="row">
    <div class="gauge" data-key="h" data-title="Habile Céladon"></div>
    <div class="legend">
      <div class="title">Habile Céladon</div>
      <div class="subtitle"><span class="badge"><span class="dot"></span><span class="status-text">—</span></span></div>
    </div>
  </div></div>

</div>

<script>
  const clamp = (n, min, max) => Math.max(min, Math.min(max, n));

  // Chaque faction a sa “teinte” (HSL) — change les nombres si tu veux
  const factionHue = {
    a: 35,   // or
    b: 200,  // azur
    c: 120,  // vert forêt
    d: 280,  // violet
    e: 18,   // cuivre
    f: 170,  // jade
    g: 0,    // sang
    h: 90    // émeraude clair
  };

  // Map [-100..100] => [0..100]
  function posPercent(v){
    return ((v + 100) / 200) * 100;
  }

  function statusFor(v){
    if (v < -20) return "Hostile";
    if (v <= -1) return "Froid";     // -19..-1
    if (v <= 20) return "Neutre";    // 0..20
    if (v <= 40) return "Amical";    // 21..40
    if (v <= 75) return "Chaleureux";// 41..75
    return "Allié";                  // 76..100
  }

  function buildTicks(container){
    const ticks = document.createElement("div");
    ticks.className = "ticks";

    const major = [
      { left: 0, label: "-100" },
      { left: 50, label: "0" },
      { left: 100, label: "+100" }
    ];

    const minorVals = [-75,-50,-25,25,50,75];
    for (const v of minorVals){
      const t = document.createElement("div");
      t.className = "tick";
      t.style.left = posPercent(v) + "%";
      ticks.appendChild(t);
    }

    for (const m of major){
      const t = document.createElement("div");
      t.className = "tick major";
      t.style.left = m.left + "%";
      ticks.appendChild(t);

      const lab = document.createElement("div");
      lab.className = "tick-label";
      lab.style.left = m.left + "%";
      lab.textContent = m.label;
      ticks.appendChild(lab);
    }

    container.appendChild(ticks);
  }

  // Crée une couleur faction + modulation selon valeur (plus clair si allié, plus sombre si hostile)
  function factionGradient(key, v){
    const hue = factionHue[key] ?? 35;
    const abs = Math.min(100, Math.abs(v));

    // hostile -> plus sombre ; allié -> plus lumineux
    const light = v >= 0 ? (45 + (abs * 0.15)) : (38 - (abs * 0.10));
    const sat   = 78;

    const c1 = `hsl(${hue} ${sat}% ${clamp(light + 8, 22, 72)}%)`;
    const c2 = `hsl(${hue} ${sat}% ${clamp(light - 6, 18, 62)}%)`;

    return `linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,0)),
            linear-gradient(90deg, ${c1}, ${c2})`;
  }

  function renderGauge(gaugeEl, value){
    const v = clamp(Math.round(value), -100, 100);
    const key = gaugeEl.dataset.key;

    gaugeEl.innerHTML = "";
    buildTicks(gaugeEl);

    const track = document.createElement("div");
    track.className = "track";

    const zero = document.createElement("div");
    zero.className = "zero";

    const left = document.createElement("div");
    left.className = "fill-left";

    const right = document.createElement("div");
    right.className = "fill-right";

    // Appliquer couleurs “faction”
    left.style.background = factionGradient(key, v);
    right.style.background = factionGradient(key, v);

    // Démarrer à 0 puis animer
    left.style.width = "0%";
    right.style.width = "0%";

    const abs = Math.abs(v);
    const w = (abs / 100) * 50;

    requestAnimationFrame(() => {
      requestAnimationFrame(() => {
        if (v < 0) left.style.width = w + "%";
        if (v > 0) right.style.width = w + "%";
      });
    });

    const bubble = document.createElement("div");
    bubble.className = "bubble";
    bubble.style.left = posPercent(v) + "%";
    bubble.textContent = (v > 0 ? "+" : "") + v + " / 100";

    // Petit accent faction sur la bulle (bordure)
    const hue = factionHue[key] ?? 35;
    bubble.style.borderColor = `hsla(${hue}, 70%, 60%, .45)`;

    track.appendChild(left);
    track.appendChild(right);

    gaugeEl.appendChild(bubble);
    gaugeEl.appendChild(track);
    gaugeEl.appendChild(zero);

    // Mise à jour du statut dans la légende correspondante
    const card = gaugeEl.closest(".card");
    const statusText = card?.querySelector(".status-text");
    const dot = card?.querySelector(".dot");
    if (statusText) statusText.textContent = statusFor(v);
    if (dot) {
      dot.style.background = `hsl(${hue} 80% 60%)`;
      dot.style.boxShadow = `0 0 14px hsla(${hue}, 80%, 60%, .35)`;
    }

    // a11y
    const title = gaugeEl.dataset.title || "Jauge";
    gaugeEl.setAttribute("role", "img");
    gaugeEl.setAttribute("aria-label", `${title} : ${(v>0?"+":"")}${v} (de -100 à +100), statut ${statusFor(v)}`);
  }

  // Valeurs par défaut (à modifier par toi)
  const defaults = {
    a: 20,
    b: -1,
    c: 0,
    d: 0,
    e: 10,
    f: 10,
    g: -50,
    h: 35
  };

  document.querySelectorAll(".gauge").forEach(g => {
    const key = g.dataset.key;
    renderGauge(g, defaults[key] ?? 0);
  });
</script>

</body>
</html>
