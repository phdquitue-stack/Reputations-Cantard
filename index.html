<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Réputations des Factions</title>

  <!-- Polices (Google Fonts) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600;800;900&family=IM+Fell+English:ital@0;1&family=UnifrakturCook:wght@700&family=Pirata+One&family=MedievalSharp&family=Alegreya:wght@600;800&family=Caesar+Dressing&family=Grenze+Gotisch:wght@600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      /* Night + gold */
      --bg0:#05070c;
      --bg1:#0b1220;

      --ink:#f3eddc;
      --text:#efe7d2;
      --muted:#c9bd9b;

      --gold:#d6b46a;
      --gold2:#f1d79a;
      --bronze:#a9743a;

      --shadow: 0 22px 55px rgba(0,0,0,.6);
      --r: 22px;

      --trackA:#1b2438;
      --trackB:#0f1422;

      --tick:#6d7b95;
    }

    *{box-sizing:border-box}

    body{
      margin:0;
      font-family: "IM Fell English", ui-serif, Georgia, serif;
      color:var(--text);
      padding:32px;
      min-height:100vh;

      background:
        radial-gradient(1200px 700px at 20% 0%, rgba(214,180,106,.16) 0%, rgba(11,18,32,0) 55%),
        radial-gradient(900px 600px at 85% 20%, rgba(110,231,255,.10) 0%, rgba(11,18,32,0) 60%),
        radial-gradient(900px 750px at 50% 120%, rgba(152,92,255,.10) 0%, rgba(11,18,32,0) 60%),
        radial-gradient(circle at 30% 20%, rgba(255,255,255,.04) 0 1px, rgba(0,0,0,0) 1px) 0 0/120px 120px,
        radial-gradient(circle at 70% 60%, rgba(255,255,255,.03) 0 1px, rgba(0,0,0,0) 1px) 0 0/160px 160px,
        linear-gradient(180deg, var(--bg1), var(--bg0));
    }

    .wrap{
      max-width: 1100px;
      margin: 0 auto;
    }

    h1{
      margin:0 0 18px;
      font-family: "Cinzel", ui-serif, serif;
      font-size:30px;
      letter-spacing:1.2px;
      font-weight:900;
      text-transform: uppercase;
      color: var(--ink);
      text-shadow: 0 3px 0 rgba(0,0,0,.65);
      position:relative;
      display:inline-block;
      padding: 0 6px 12px;
    }
    h1:before, h1:after{
      content:"";
      position:absolute;
      left:-6px; right:-6px;
      height:2px;
      background: linear-gradient(90deg, transparent, rgba(241,215,154,.95), transparent);
      filter: drop-shadow(0 8px 14px rgba(214,180,106,.22));
    }
    h1:before{ bottom:2px; opacity:.75; }
    h1:after{ bottom:0; opacity:.95; }

    .grid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap:16px;
    }

    /* Card (base) */
    .card{
      position:relative;
      border-radius: var(--r);
      padding:16px;
      box-shadow: var(--shadow);
      overflow:hidden;
      border: 1px solid rgba(214,180,106,.25);
    }

    /* Engraved runes */
    .card:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        repeating-linear-gradient(
          135deg,
          rgba(214,180,106,.06) 0px,
          rgba(214,180,106,.06) 6px,
          rgba(255,255,255,0) 6px,
          rgba(255,255,255,0) 18px
        );
      opacity:.26;
      pointer-events:none;
      mix-blend-mode: overlay;
    }

    /* Inner parchment panel */
    .card:after{
      content:"";
      position:absolute;
      inset:12px;
      border-radius: calc(var(--r) - 12px);
      background:
        radial-gradient(120% 140% at 20% 10%, rgba(241,215,154,.12) 0%, rgba(0,0,0,0) 55%),
        radial-gradient(140% 140% at 80% 40%, rgba(241,215,154,.07) 0%, rgba(0,0,0,0) 55%),
        linear-gradient(180deg, rgba(10,12,18,.35), rgba(10,12,18,.15));
      border: 1px solid rgba(241,215,154,.12);
      pointer-events:none;
    }

    /* Corner “rivets” */
    .rivet{
      position:absolute;
      width:12px; height:12px;
      border-radius:50%;
      background:
        radial-gradient(circle at 30% 30%, rgba(255,255,255,.35), rgba(255,255,255,0) 55%),
        radial-gradient(circle at 70% 70%, rgba(0,0,0,.5), rgba(0,0,0,0) 55%),
        linear-gradient(180deg, rgba(241,215,154,.75), rgba(169,116,58,.55));
      border:1px solid rgba(0,0,0,.35);
      box-shadow: 0 8px 14px rgba(0,0,0,.35);
      opacity:.95;
      pointer-events:none;
    }
    .r1{ top:10px; left:10px; }
    .r2{ top:10px; right:10px; }
    .r3{ bottom:10px; left:10px; }
    .r4{ bottom:10px; right:10px; }

    .row{display:flex;flex-direction:column;gap:10px; position:relative; z-index:1;}

    /* Default legend fonts; overridden per faction below */
    .legend .title{
      font-family: "Cinzel", ui-serif, serif;
      font-weight:800;
      font-size:14px;
      letter-spacing:.55px;
      color: var(--ink);
      text-shadow: 0 2px 0 rgba(0,0,0,.55);
    }

    .legend .subtitle{
      color: var(--muted);
      font-size:13px;
      margin-top:4px;
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
    }

    /* Status seal */
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:4px 10px;
      border-radius:999px;
      font-family: "Cinzel", ui-serif, serif;
      font-weight:800;
      font-size:11px;
      letter-spacing:.4px;
      color: var(--ink);
      border:1px solid rgba(214,180,106,.32);
      background:
        radial-gradient(120% 180% at 30% 30%, rgba(241,215,154,.16), rgba(0,0,0,0) 55%),
        linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,0)),
        rgba(14,18,30,.62);
      backdrop-filter: blur(6px);
      box-shadow: 0 12px 26px rgba(0,0,0,.28);
    }
    .dot{
      width:9px;height:9px;border-radius:50%;
      background: rgba(214,180,106,.85);
      box-shadow: 0 0 16px rgba(214,180,106,.35);
    }

    .gauge{
      position:relative;
      width:100%;
      height:84px;
      padding-top:20px;
    }

    /* Ticks */
    .ticks{
      position:absolute;
      left:0; right:0;
      top:10px;
      height:22px;
      pointer-events:none;
    }
    .tick{
      position:absolute;
      top:0;
      width:2px;
      height:11px;
      background: rgba(109,123,149,.95);
      transform: translateX(-50%);
      border-radius:2px;
      filter: drop-shadow(0 2px 2px rgba(0,0,0,.35));
    }
    .tick.major{
      height:16px;
      background: rgba(241,215,154,.78);
      box-shadow: 0 0 16px rgba(214,180,106,.22);
    }
    .tick-label{
      position:absolute;
      top:15px;
      transform: translateX(-50%);
      font-size:11px;
      color: rgba(200,187,151,.96);
      text-shadow: 0 1px 0 rgba(0,0,0,.7);
    }

    /* Track */
    .track{
      position:absolute;
      left:0; right:0;
      top:42px;
      height:15px;
      border-radius:999px;
      overflow:hidden;

      background:
        radial-gradient(circle at 20% 50%, rgba(255,255,255,.06) 0 1px, rgba(0,0,0,0) 1px) 0 0/18px 18px,
        radial-gradient(circle at 70% 40%, rgba(255,255,255,.05) 0 1px, rgba(0,0,0,0) 1px) 0 0/22px 22px,
        linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,0)),
        radial-gradient(60% 180% at 50% 0%, rgba(214,180,106,.12) 0%, rgba(0,0,0,0) 62%),
        linear-gradient(180deg, rgba(27,36,56,.97), rgba(15,20,34,.97));

      border: 1px solid rgba(214,180,106,.2);
      box-shadow:
        inset 0 3px 7px rgba(0,0,0,.68),
        0 10px 22px rgba(0,0,0,.35);
    }

    /* Zero “rune” */
    .zero{
      position:absolute;
      left:50%;
      top:39px;
      width:2px;
      height:20px;
      transform: translateX(-50%);
      background: rgba(241,215,154,.92);
      box-shadow: 0 0 20px rgba(214,180,106,.38);
      border-radius:2px;
      pointer-events:none;
    }
    .zero:after{
      content:"ᚠ";
      position:absolute;
      top:-18px;
      left:50%;
      transform: translateX(-50%);
      font-family: "Cinzel", ui-serif, serif;
      font-size:12px;
      color: rgba(241,215,154,.9);
      text-shadow: 0 0 14px rgba(214,180,106,.25);
      opacity:.9;
    }

    .fill-left, .fill-right{
      position:absolute;
      top:0;
      height:100%;
      width:0%;
      transition: width 900ms cubic-bezier(.2,.9,.2,1);
      box-shadow:
        inset 0 0 0 1px rgba(255,255,255,.14),
        0 8px 22px rgba(0,0,0,.24);
      overflow:hidden;
    }
    .fill-left{
      right:50%;
      border-top-left-radius:999px;
      border-bottom-left-radius:999px;
      border-top-right-radius:0;
      border-bottom-right-radius:0;
    }
    .fill-right{
      left:50%;
      border-top-right-radius:999px;
      border-bottom-right-radius:999px;
      border-top-left-radius:0;
      border-bottom-left-radius:0;
    }

    .fill-left::before, .fill-right::before{
      content:"";
      position:absolute;
      inset:0;
      background:
        radial-gradient(140px 46px at 25% 50%, rgba(255,255,255,.30), rgba(255,255,255,0) 70%),
        linear-gradient(90deg, rgba(255,255,255,.18), rgba(255,255,255,0) 55%);
      opacity:.85;
      mix-blend-mode: screen;
    }
    .fill-left::after, .fill-right::after{
      content:"";
      position:absolute;
      top:-34px;
      left:-50px;
      width:110px;
      height:110px;
      background: radial-gradient(circle, rgba(255,255,255,.26), rgba(255,255,255,0) 64%);
      opacity:.33;
      filter: blur(1px);
      animation: floatSpark 3.8s ease-in-out infinite;
    }
    @keyframes floatSpark{
      0%{ transform: translateX(0) translateY(0); }
      50%{ transform: translateX(85px) translateY(10px); }
      100%{ transform: translateX(0) translateY(0); }
    }

    /* Value “wax seal” */
    .bubble{
      position:absolute;
      top:0px;
      transform: translateX(-50%);
      padding:7px 11px;
      border-radius:999px;
      font-size:12px;
      font-family: "Cinzel", ui-serif, serif;
      font-weight:800;
      letter-spacing:.25px;
      color: var(--ink);

      background:
        radial-gradient(90% 140% at 30% 20%, rgba(241,215,154,.22) 0%, rgba(214,180,106,.08) 45%, rgba(0,0,0,0) 72%),
        linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,0)),
        rgba(14,18,30,.78);

      border:1px solid rgba(214,180,106,.35);
      box-shadow: 0 12px 26px rgba(0,0,0,.42);
      white-space:nowrap;
      backdrop-filter: blur(6px);
    }
    .bubble::after{
      content:"";
      position:absolute;
      left:50%;
      bottom:-6px;
      width:10px;
      height:10px;
      transform: translateX(-50%) rotate(45deg);
      background: rgba(14,18,30,.78);
      border-right:1px solid rgba(214,180,106,.35);
      border-bottom:1px solid rgba(214,180,106,.35);
    }

    /* ------------------------------
       Faction themes (fonts + card tint)
       ------------------------------ */

    /* Base: uses --fhue set inline on each card */
    .card{
      background:
        radial-gradient(120% 140% at 10% 0%, hsla(var(--fhue), 85%, 60%, .18) 0%, rgba(15,18,24,0) 55%),
        radial-gradient(140% 160% at 90% 80%, hsla(var(--fhue), 85%, 60%, .08) 0%, rgba(15,18,24,0) 55%),
        linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.02)),
        linear-gradient(180deg, rgba(14,16,22,.96), rgba(7,9,14,.96));
    }

    /* Per-card font assignment via attribute */
    .card[data-font="cinzel"] .legend .title,
    .card[data-font="cinzel"] .badge{ font-family: "Cinzel", ui-serif, serif; }

    .card[data-font="fell"] .legend .title,
    .card[data-font="fell"] .badge{ font-family: "IM Fell English", ui-serif, Georgia, serif; }

    .card[data-font="fraktur"] .legend .title,
    .card[data-font="fraktur"] .badge{ font-family: "UnifrakturCook", ui-serif, serif; letter-spacing:.2px; }

    .card[data-font="pirata"] .legend .title,
    .card[data-font="pirata"] .badge{ font-family: "Pirata One", ui-serif, serif; letter-spacing:.35px; }

    .card[data-font="medieval"] .legend .title,
    .card[data-font="medieval"] .badge{ font-family: "MedievalSharp", ui-serif, serif; letter-spacing:.4px; }

    .card[data-font="alegreya"] .legend .title,
    .card[data-font="alegreya"] .badge{ font-family: "Alegreya", ui-serif, serif; letter-spacing:.4px; }

    .card[data-font="caesar"] .legend .title,
    .card[data-font="caesar"] .badge{ font-family: "Caesar Dressing", ui-serif, serif; letter-spacing:.3px; }

    .card[data-font="gotisch"] .legend .title,
    .card[data-font="gotisch"] .badge{ font-family: "Grenze Gotisch", ui-serif, serif; letter-spacing:.25px; }

    @media (max-width:420px){
      body{padding:18px}
      h1{font-size:26px}
    }
  </style>
</head>
<body>
<div class="wrap">

<h1>Réputation des Factions</h1>

<div class="grid">

  <!-- a -->
  <div class="card" data-key="a" data-font="cinzel" style="--fhue:35;">
    <span class="rivet r1"></span><span class="rivet r2"></span><span class="rivet r3"></span><span class="rivet r4"></span>
    <div class="row">
      <div class="gauge" data-key="a" data-title="Adamantine du Ponant"></div>
      <div class="legend">
        <div class="title">Adamantine du Ponant</div>
        <div class="subtitle"><span class="badge"><span class="dot"></span><span class="status-text">—</span></span></div>
      </div>
    </div>
  </div>

  <!-- b -->
  <div class="card" data-key="b" data-font="fell" style="--fhue:200;">
    <span class="rivet r1"></span><span class="rivet r2"></span><span class="rivet r3"></span><span class="rivet r4"></span>
    <div class="row">
      <div class="gauge" data-key="b" data-title="Alignement"></div>
      <div class="legend">
        <div class="title">Alignement</div>
        <div class="subtitle">
          0 = neutre | &lt;0 = mauvais | &gt;0 = bon
          <span class="badge"><span class="dot"></span><span class="status-text">—</span></span>
        </div>
      </div>
    </div>
  </div>

  <!-- c -->
  <div class="card" data-key="c" data-font="alegreya" style="--fhue:120;">
    <span class="rivet r1"></span><span class="rivet r2"></span><span class="rivet r3"></span><span class="rivet r4"></span>
    <div class="row">
      <div class="gauge" data-key="c" data-title="Karenta"></div>
      <div class="legend">
        <div class="title">Karenta</div>
        <div class="subtitle"><span class="badge"><span class="dot"></span><span class="status-text">—</span></span></div>
      </div>
    </div>
  </div>

  <!-- d -->
  <div class="card" data-key="d" data-font="gotisch" style="--fhue:280;">
    <span class="rivet r1"></span><span class="rivet r2"></span><span class="rivet r3"></span><span class="rivet r4"></span>
    <div class="row">
      <div class="gauge" data-key="d" data-title="Venageta"></div>
      <div class="legend">
        <div class="title">Venageta</div>
        <div class="subtitle"><span class="badge"><span class="dot"></span><span class="status-text">—</span></span></div>
      </div>
    </div>
  </div>

  <!-- e -->
  <div class="card" data-key="e" data-font="pirata" style="--fhue:18;">
    <span class="rivet r1"></span><span class="rivet r2"></span><span class="rivet r3"></span><span class="rivet r4"></span>
    <div class="row">
      <div class="gauge" data-key="e" data-title="La Lance de Pyrite"></div>
      <div class="legend">
        <div class="title">La Lance de Pyrite</div>
        <div class="subtitle"><span class="badge"><span class="dot"></span><span class="status-text">—</span></span></div>
      </div>
    </div>
  </div>

  <!-- f -->
  <div class="card" data-key="f" data-font="medieval" style="--fhue:170;">
    <span class="rivet r1"></span><span class="rivet r2"></span><span class="rivet r3"></span><span class="rivet r4"></span>
    <div class="row">
      <div class="gauge" data-key="f" data-title="Halle des aventuriers"></div>
      <div class="legend">
        <div class="title">Halle des aventuriers</div>
        <div class="subtitle"><span class="badge"><span class="dot"></span><span class="status-text">—</span></span></div>
      </div>
    </div>
  </div>

  <!-- g -->
  <div class="card" data-key="g" data-font="fraktur" style="--fhue:0;">
    <span class="rivet r1"></span><span class="rivet r2"></span><span class="rivet r3"></span><span class="rivet r4"></span>
    <div class="row">
      <div class="gauge" data-key="g" data-title="Le ver Blanc"></div>
      <div class="legend">
        <div class="title">Le ver Blanc</div>
        <div class="subtitle"><span class="badge"><span class="dot"></span><span class="status-text">—</span></span></div>
      </div>
    </div>
  </div>

  <!-- h -->
  <div class="card" data-key="h" data-font="caesar" style="--fhue:90;">
    <span class="rivet r1"></span><span class="rivet r2"></span><span class="rivet r3"></span><span class="rivet r4"></span>
    <div class="row">
      <div class="gauge" data-key="h" data-title="Habile Céladon"></div>
      <div class="legend">
        <div class="title">Habile Céladon</div>
        <div class="subtitle"><span class="badge"><span class="dot"></span><span class="status-text">—</span></span></div>
      </div>
    </div>
  </div>

</div>

<script>
  const clamp = (n, min, max) => Math.max(min, Math.min(max, n));

  // Hue par faction (doit rester cohérent avec --fhue au-dessus)
  const factionHue = {
    a: 35,
    b: 200,
    c: 120,
    d: 280,
    e: 18,
    f: 170,
    g: 0,
    h: 90
  };

  function posPercent(v){
    return ((v + 100) / 200) * 100;
  }

  function statusFor(v){
    if (v < -20) return "Hostile";
    if (v <= -1) return "Froid";        // -19..-1
    if (v <= 20) return "Neutre";       // 0..20
    if (v <= 40) return "Amical";       // 21..40
    if (v <= 75) return "Chaleureux";   // 41..75
    return "Allié";                     // 76..100
  }

  function buildTicks(container){
    const ticks = document.createElement("div");
    ticks.className = "ticks";

    const major = [
      { left: 0, label: "-100" },
      { left: 50, label: "0" },
      { left: 100, label: "+100" }
    ];

    const minorVals = [-75,-50,-25,25,50,75];
    for (const v of minorVals){
      const t = document.createElement("div");
      t.className = "tick";
      t.style.left = posPercent(v) + "%";
      ticks.appendChild(t);
    }

    for (const m of major){
      const t = document.createElement("div");
      t.className = "tick major";
      t.style.left = m.left + "%";
      ticks.appendChild(t);

      const lab = document.createElement("div");
      lab.className = "tick-label";
      lab.style.left = m.left + "%";
      lab.textContent = m.label;
      ticks.appendChild(lab);
    }

    container.appendChild(ticks);
  }

  function factionGradient(key, v){
    const hue = factionHue[key] ?? 35;
    const abs = Math.min(100, Math.abs(v));

    const light = v >= 0 ? (44 + abs * 0.16) : (38 - abs * 0.10);
    const sat = 82;

    const c1 = `hsl(${hue} ${sat}% ${clamp(light + 9, 22, 74)}%)`;
    const c2 = `hsl(${hue} ${sat}% ${clamp(light - 7, 18, 64)}%)`;

    return `linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,0)),
            linear-gradient(90deg, ${c1}, ${c2})`;
  }

  function renderGauge(gaugeEl, value){
    const v = clamp(Math.round(value), -100, 100);
    const key = gaugeEl.dataset.key;

    gaugeEl.innerHTML = "";
    buildTicks(gaugeEl);

    const track = document.createElement("div");
    track.className = "track";

    const zero = document.createElement("div");
    zero.className = "zero";

    const left = document.createElement("div");
    left.className = "fill-left";

    const right = document.createElement("div");
    right.className = "fill-right";

    left.style.background = factionGradient(key, v);
    right.style.background = factionGradient(key, v);

    left.style.width = "0%";
    right.style.width = "0%";

    const abs = Math.abs(v);
    const w = (abs / 100) * 50;

    requestAnimationFrame(() => {
      requestAnimationFrame(() => {
        if (v < 0) left.style.width = w + "%";
        if (v > 0) right.style.width = w + "%";
      });
    });

    const bubble = document.createElement("div");
    bubble.className = "bubble";
    bubble.style.left = posPercent(v) + "%";
    bubble.textContent = (v > 0 ? "+" : "") + v + " / 100";

    const hue = factionHue[key] ?? 35;
    bubble.style.borderColor = `hsla(${hue}, 70%, 60%, .50)`;

    track.appendChild(left);
    track.appendChild(right);

    gaugeEl.appendChild(bubble);
    gaugeEl.appendChild(track);
    gaugeEl.appendChild(zero);

    const card = gaugeEl.closest(".card");
    const statusText = card?.querySelector(".status-text");
    const dot = card?.querySelector(".dot");
    if (statusText) statusText.textContent = statusFor(v);
    if (dot) {
      dot.style.background = `hsl(${hue} 85% 60%)`;
      dot.style.boxShadow = `0 0 16px hsla(${hue}, 85%, 60%, .38)`;
    }
  }

  const defaults = {
    a: 20,
    b: -1,
    c: 10,
    d: 0,
    e: 10,
    f: 10,
    g: 20,
    h: -15
  };

  document.querySelectorAll(".gauge").forEach(g => {
    const key = g.dataset.key;
    renderGauge(g, defaults[key] ?? 0);
  });
</script>

</div>
</body>
</html>
